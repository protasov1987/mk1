# План внедрения авторизации и уровней доступа

Эти требования требуют архитектурных изменений фронтенда и сервера. План включает основные шаги, которые нужно реализовать:

1. **Бэкенд**
   - Расширить `db.js` и файл `data/database.json` новыми сущностями `users` и `accessLevels`.
   - При инициализации БД создавать пользователя `Abyss` с паролем `ssyba` и уровнем доступа администратора, если база пуста.
   - Добавить API для аутентификации по паролю (без логина), управления пользователями (CRUD, генерация пароля, проверка уникальности) и уровнями доступа.
   - Добавить хранение серверных сессий с тайм-аутом бездействия, привязанных к уровню доступа, и невозможностью смены пароля Abyss.

2. **Фронтенд**
   - Показ формы авторизации сразу после загрузки: одно поле «Пароль», вход по Enter или кнопке, блокировка интерфейса до входа.
   - После входа показывать имя пользователя в шапке и кнопку «Выход», запускать таймер авто-выхода.
   - Скрывать вкладки и пункты меню без права «Просмотр»; блокировать действия без права «Изменение» и прямые переходы в закрытые разделы.
   - Реализовать меню «Пользователи» (видит только Abyss/администраторы): список, создание, редактирование, удаление. Генерация пароля (буквы+цифры, ≥6), проверка уникальности, печать штрихкода Code-128 с именем.
   - Реализовать меню «Уровни доступа»: список уровней, настройка прав «Просмотр»/«Изменение» по вкладкам и действиям (вложения, загрузка/удаление файлов), выбор стартовой вкладки, отметка «Рабочий».
   - Поля исполнителей и дополнительных исполнителей заменить на выпадающий список (ComboBox) с созданными пользователями.
   - В «Рабочем месте» для пользователей со статусом «Рабочий» показывать только карты, где они указаны исполнителем/доп. исполнителем, с визуальным выделением их операций и ограничением кнопок действий.

3. **Безопасность и ограничения**
   - Пароли всех пользователей должны быть уникальны и не пересекаться с паролями других пользователей или номерами технологических карт.
   - Пароль администратора (Abyss) фиксирован и не изменяется через интерфейс.

Этот документ фиксирует целевой объём работ перед реализацией и служит основой для детальной оценки и разработки.
